{
  "version": "1.0.0",
  "generatedAt": "2026-01-29T07:19:14.215Z",
  "checksum": "d3d055f56a98bfbf",
  "file": "backend/api/features/store/db_test.py",
  "functions": [
    {
      "id": "backend/api/features/store/db_test.py:setup_prisma:14",
      "name": "setup_prisma",
      "startLine": 14,
      "endLine": 20,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "Prisma",
          "resolved": false,
          "confidence": 0,
          "line": 17
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/db_test.py:test_get_store_agents:24",
      "name": "test_get_store_agents",
      "startLine": 24,
      "endLine": 66,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "StoreAgent",
          "resolved": false,
          "confidence": 0,
          "line": 27
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 45
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 52,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 53
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 54
        },
        {
          "target": "get_store_agents",
          "resolved": true,
          "confidence": 0.8,
          "line": 57,
          "resolvedId": "backend/api/external/v1/routes.py:get_store_agents:198"
        },
        {
          "target": "len",
          "resolved": false,
          "confidence": 0,
          "line": 60
        },
        {
          "target": "assert_called_once",
          "resolved": false,
          "confidence": 0,
          "line": 65
        },
        {
          "target": "assert_called_once",
          "resolved": false,
          "confidence": 0,
          "line": 66
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/db_test.py:test_get_store_agent_details:70",
      "name": "test_get_store_agent_details",
      "startLine": 70,
      "endLine": 179,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "StoreAgent",
          "resolved": false,
          "confidence": 0,
          "line": 72
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 90
        },
        {
          "target": "StoreAgent",
          "resolved": false,
          "confidence": 0,
          "line": 96
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 114
        },
        {
          "target": "MagicMock",
          "resolved": false,
          "confidence": 0,
          "line": 120
        },
        {
          "target": "MagicMock",
          "resolved": false,
          "confidence": 0,
          "line": 123
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 127,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 139
        },
        {
          "target": "MagicMock",
          "resolved": false,
          "confidence": 0,
          "line": 144
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 146,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 147
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 152,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 153
        },
        {
          "target": "get_store_agent_details",
          "resolved": false,
          "confidence": 0,
          "line": 158
        },
        {
          "target": "call",
          "resolved": false,
          "confidence": 0,
          "line": 174
        },
        {
          "target": "call",
          "resolved": false,
          "confidence": 0,
          "line": 177
        },
        {
          "target": "assert_called_once",
          "resolved": false,
          "confidence": 0,
          "line": 179
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 131,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/db_test.py:mock_find_first_side_effect:130",
      "name": "mock_find_first_side_effect",
      "startLine": 130,
      "endLine": 137,
      "isEntryPoint": false,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 131,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/db_test.py:test_get_store_creator_details:183",
      "name": "test_get_store_creator_details",
      "startLine": 183,
      "endLine": 216,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "Creator",
          "resolved": false,
          "confidence": 0,
          "line": 185
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 199,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 200
        },
        {
          "target": "get_store_creator_details",
          "resolved": false,
          "confidence": 0,
          "line": 205
        },
        {
          "target": "assert_called_once_with",
          "resolved": false,
          "confidence": 0,
          "line": 214
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/db_test.py:test_create_store_submission:220",
      "name": "test_create_store_submission",
      "startLine": 220,
      "endLine": 288,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "AgentGraph",
          "resolved": false,
          "confidence": 0,
          "line": 222
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 226
        },
        {
          "target": "StoreListing",
          "resolved": false,
          "confidence": 0,
          "line": 230
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 232
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 233
        },
        {
          "target": "StoreListingVersion",
          "resolved": false,
          "confidence": 0,
          "line": 241
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 247
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 248
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 264,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 265
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 267,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 268
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 269
        },
        {
          "target": "create_store_submission",
          "resolved": false,
          "confidence": 0,
          "line": 272
        },
        {
          "target": "assert_called_once",
          "resolved": false,
          "confidence": 0,
          "line": 287
        },
        {
          "target": "assert_called_once",
          "resolved": false,
          "confidence": 0,
          "line": 288
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/db_test.py:test_update_profile:292",
      "name": "test_update_profile",
      "startLine": 292,
      "endLine": 333,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "Profile",
          "resolved": false,
          "confidence": 0,
          "line": 294
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 303
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 304
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 308,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 309
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 312
        },
        {
          "target": "Profile",
          "resolved": false,
          "confidence": 0,
          "line": 315
        },
        {
          "target": "update_profile",
          "resolved": false,
          "confidence": 0,
          "line": 325
        },
        {
          "target": "profile",
          "resolved": false,
          "confidence": 0,
          "line": 325
        },
        {
          "target": "assert_called_once",
          "resolved": false,
          "confidence": 0,
          "line": 332
        },
        {
          "target": "assert_called_once",
          "resolved": false,
          "confidence": 0,
          "line": 333
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/db_test.py:test_get_user_profile:337",
      "name": "test_get_user_profile",
      "startLine": 337,
      "endLine": 367,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "Profile",
          "resolved": false,
          "confidence": 0,
          "line": 339
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 347
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 348
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 353,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 354
        },
        {
          "target": "get_user_profile",
          "resolved": false,
          "confidence": 0,
          "line": 359
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/db_test.py:test_get_store_agents_with_search_parameterized:371",
      "name": "test_get_store_agents_with_search_parameterized",
      "startLine": 371,
      "endLine": 379,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "get_store_agents",
          "resolved": true,
          "confidence": 0.8,
          "line": 376,
          "resolvedId": "backend/api/external/v1/routes.py:get_store_agents:198"
        },
        {
          "target": "isinstance",
          "resolved": false,
          "confidence": 0,
          "line": 379
        },
        {
          "target": "list",
          "resolved": false,
          "confidence": 0,
          "line": 379
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/db_test.py:test_get_store_agents_with_search_and_filters_parameterized:383",
      "name": "test_get_store_agents_with_search_and_filters_parameterized",
      "startLine": 383,
      "endLine": 398,
      "isEntryPoint": true,
      "isDataAccessor": true,
      "calls": [
        {
          "target": "get_store_agents",
          "resolved": true,
          "confidence": 0.8,
          "line": 387,
          "resolvedId": "backend/api/external/v1/routes.py:get_store_agents:198"
        },
        {
          "target": "isinstance",
          "resolved": false,
          "confidence": 0,
          "line": 398
        },
        {
          "target": "list",
          "resolved": false,
          "confidence": 0,
          "line": 398
        }
      ],
      "calledBy": [],
      "dataAccess": [
        {
          "table": "StoreAgent",
          "operation": "delete",
          "line": 390,
          "fields": []
        }
      ]
    },
    {
      "id": "backend/api/features/store/db_test.py:test_get_store_agents_search_category_array_injection:402",
      "name": "test_get_store_agents_search_category_array_injection",
      "startLine": 402,
      "endLine": 413,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "get_store_agents",
          "resolved": true,
          "confidence": 0.8,
          "line": 406,
          "resolvedId": "backend/api/external/v1/routes.py:get_store_agents:198"
        },
        {
          "target": "isinstance",
          "resolved": false,
          "confidence": 0,
          "line": 413
        },
        {
          "target": "list",
          "resolved": false,
          "confidence": 0,
          "line": 413
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/db_test.py:__module__:1",
      "name": "__module__",
      "startLine": 1,
      "endLine": 414,
      "isEntryPoint": false,
      "isDataAccessor": true,
      "calls": [
        {
          "target": "fixture",
          "resolved": false,
          "confidence": 0,
          "line": 13
        },
        {
          "target": "Prisma",
          "resolved": false,
          "confidence": 0,
          "line": 17
        },
        {
          "target": "asyncio",
          "resolved": false,
          "confidence": 0,
          "line": 23
        },
        {
          "target": "StoreAgent",
          "resolved": false,
          "confidence": 0,
          "line": 27
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 45
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 52,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 53
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 54
        },
        {
          "target": "get_store_agents",
          "resolved": true,
          "confidence": 0.8,
          "line": 57,
          "resolvedId": "backend/api/external/v1/routes.py:get_store_agents:198"
        },
        {
          "target": "len",
          "resolved": false,
          "confidence": 0,
          "line": 60
        },
        {
          "target": "assert_called_once",
          "resolved": false,
          "confidence": 0,
          "line": 65
        },
        {
          "target": "assert_called_once",
          "resolved": false,
          "confidence": 0,
          "line": 66
        },
        {
          "target": "asyncio",
          "resolved": false,
          "confidence": 0,
          "line": 69
        },
        {
          "target": "StoreAgent",
          "resolved": false,
          "confidence": 0,
          "line": 72
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 90
        },
        {
          "target": "StoreAgent",
          "resolved": false,
          "confidence": 0,
          "line": 96
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 114
        },
        {
          "target": "MagicMock",
          "resolved": false,
          "confidence": 0,
          "line": 120
        },
        {
          "target": "MagicMock",
          "resolved": false,
          "confidence": 0,
          "line": 123
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 127,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 139
        },
        {
          "target": "MagicMock",
          "resolved": false,
          "confidence": 0,
          "line": 144
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 146,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 147
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 152,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 153
        },
        {
          "target": "get_store_agent_details",
          "resolved": false,
          "confidence": 0,
          "line": 158
        },
        {
          "target": "call",
          "resolved": false,
          "confidence": 0,
          "line": 174
        },
        {
          "target": "call",
          "resolved": false,
          "confidence": 0,
          "line": 177
        },
        {
          "target": "assert_called_once",
          "resolved": false,
          "confidence": 0,
          "line": 179
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 131,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "asyncio",
          "resolved": false,
          "confidence": 0,
          "line": 182
        },
        {
          "target": "Creator",
          "resolved": false,
          "confidence": 0,
          "line": 185
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 199,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 200
        },
        {
          "target": "get_store_creator_details",
          "resolved": false,
          "confidence": 0,
          "line": 205
        },
        {
          "target": "assert_called_once_with",
          "resolved": false,
          "confidence": 0,
          "line": 214
        },
        {
          "target": "asyncio",
          "resolved": false,
          "confidence": 0,
          "line": 219
        },
        {
          "target": "AgentGraph",
          "resolved": false,
          "confidence": 0,
          "line": 222
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 226
        },
        {
          "target": "StoreListing",
          "resolved": false,
          "confidence": 0,
          "line": 230
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 232
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 233
        },
        {
          "target": "StoreListingVersion",
          "resolved": false,
          "confidence": 0,
          "line": 241
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 247
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 248
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 264,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 265
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 267,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 268
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 269
        },
        {
          "target": "create_store_submission",
          "resolved": false,
          "confidence": 0,
          "line": 272
        },
        {
          "target": "assert_called_once",
          "resolved": false,
          "confidence": 0,
          "line": 287
        },
        {
          "target": "assert_called_once",
          "resolved": false,
          "confidence": 0,
          "line": 288
        },
        {
          "target": "asyncio",
          "resolved": false,
          "confidence": 0,
          "line": 291
        },
        {
          "target": "Profile",
          "resolved": false,
          "confidence": 0,
          "line": 294
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 303
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 304
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 308,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 309
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 312
        },
        {
          "target": "Profile",
          "resolved": false,
          "confidence": 0,
          "line": 315
        },
        {
          "target": "update_profile",
          "resolved": false,
          "confidence": 0,
          "line": 325
        },
        {
          "target": "profile",
          "resolved": false,
          "confidence": 0,
          "line": 325
        },
        {
          "target": "assert_called_once",
          "resolved": false,
          "confidence": 0,
          "line": 332
        },
        {
          "target": "assert_called_once",
          "resolved": false,
          "confidence": 0,
          "line": 333
        },
        {
          "target": "asyncio",
          "resolved": false,
          "confidence": 0,
          "line": 336
        },
        {
          "target": "Profile",
          "resolved": false,
          "confidence": 0,
          "line": 339
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 347
        },
        {
          "target": "now",
          "resolved": false,
          "confidence": 0,
          "line": 348
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 353,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 354
        },
        {
          "target": "get_user_profile",
          "resolved": false,
          "confidence": 0,
          "line": 359
        },
        {
          "target": "asyncio",
          "resolved": false,
          "confidence": 0,
          "line": 370
        },
        {
          "target": "get_store_agents",
          "resolved": true,
          "confidence": 0.8,
          "line": 376,
          "resolvedId": "backend/api/external/v1/routes.py:get_store_agents:198"
        },
        {
          "target": "isinstance",
          "resolved": false,
          "confidence": 0,
          "line": 379
        },
        {
          "target": "list",
          "resolved": false,
          "confidence": 0,
          "line": 379
        },
        {
          "target": "asyncio",
          "resolved": false,
          "confidence": 0,
          "line": 382
        },
        {
          "target": "get_store_agents",
          "resolved": true,
          "confidence": 0.8,
          "line": 387,
          "resolvedId": "backend/api/external/v1/routes.py:get_store_agents:198"
        },
        {
          "target": "isinstance",
          "resolved": false,
          "confidence": 0,
          "line": 398
        },
        {
          "target": "list",
          "resolved": false,
          "confidence": 0,
          "line": 398
        },
        {
          "target": "asyncio",
          "resolved": false,
          "confidence": 0,
          "line": 401
        },
        {
          "target": "get_store_agents",
          "resolved": true,
          "confidence": 0.8,
          "line": 406,
          "resolvedId": "backend/api/external/v1/routes.py:get_store_agents:198"
        },
        {
          "target": "isinstance",
          "resolved": false,
          "confidence": 0,
          "line": 413
        },
        {
          "target": "list",
          "resolved": false,
          "confidence": 0,
          "line": 413
        },
        {
          "target": "fixture",
          "resolved": false,
          "confidence": 0,
          "line": 13
        },
        {
          "target": "asyncio",
          "resolved": false,
          "confidence": 0,
          "line": 23
        },
        {
          "target": "asyncio",
          "resolved": false,
          "confidence": 0,
          "line": 69
        },
        {
          "target": "asyncio",
          "resolved": false,
          "confidence": 0,
          "line": 182
        },
        {
          "target": "asyncio",
          "resolved": false,
          "confidence": 0,
          "line": 219
        },
        {
          "target": "asyncio",
          "resolved": false,
          "confidence": 0,
          "line": 291
        },
        {
          "target": "asyncio",
          "resolved": false,
          "confidence": 0,
          "line": 336
        },
        {
          "target": "asyncio",
          "resolved": false,
          "confidence": 0,
          "line": 370
        },
        {
          "target": "asyncio",
          "resolved": false,
          "confidence": 0,
          "line": 382
        },
        {
          "target": "asyncio",
          "resolved": false,
          "confidence": 0,
          "line": 401
        }
      ],
      "calledBy": [],
      "dataAccess": [
        {
          "table": "StoreAgent",
          "operation": "delete",
          "line": 390,
          "fields": []
        }
      ]
    }
  ]
}
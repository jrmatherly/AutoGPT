{
  "version": "1.0.0",
  "generatedAt": "2026-01-29T07:19:14.154Z",
  "checksum": "d7251383c8655bfc",
  "file": "backend/api/features/store/media.py",
  "functions": [
    {
      "id": "backend/api/features/store/media.py:check_media_exists:21",
      "name": "check_media_exists",
      "startLine": 21,
      "endLine": 60,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "Settings",
          "resolved": false,
          "confidence": 0,
          "line": 33
        },
        {
          "target": "MissingConfigError",
          "resolved": false,
          "confidence": 0,
          "line": 35
        },
        {
          "target": "Storage",
          "resolved": false,
          "confidence": 0,
          "line": 37
        },
        {
          "target": "download_metadata",
          "resolved": false,
          "confidence": 0,
          "line": 43
        },
        {
          "target": "bucket_name",
          "resolved": false,
          "confidence": 0,
          "line": 43
        },
        {
          "target": "image_path",
          "resolved": false,
          "confidence": 0,
          "line": 43
        },
        {
          "target": "download_metadata",
          "resolved": false,
          "confidence": 0,
          "line": 53
        },
        {
          "target": "bucket_name",
          "resolved": false,
          "confidence": 0,
          "line": 53
        },
        {
          "target": "video_path",
          "resolved": false,
          "confidence": 0,
          "line": 53
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/media.py:upload_media:63",
      "name": "upload_media",
      "startLine": 63,
      "endLine": 204,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "read",
          "resolved": false,
          "confidence": 0,
          "line": 68
        },
        {
          "target": "seek",
          "resolved": false,
          "confidence": 0,
          "line": 69
        },
        {
          "target": "error",
          "resolved": true,
          "confidence": 0.8,
          "line": 71,
          "resolvedId": "backend/util/logging.py:error:49"
        },
        {
          "target": "str",
          "resolved": false,
          "confidence": 0,
          "line": 71
        },
        {
          "target": "e",
          "resolved": false,
          "confidence": 0,
          "line": 71
        },
        {
          "target": "FileReadError",
          "resolved": false,
          "confidence": 0,
          "line": 72
        },
        {
          "target": "startswith",
          "resolved": false,
          "confidence": 0,
          "line": 77
        },
        {
          "target": "InvalidFileTypeError",
          "resolved": false,
          "confidence": 0,
          "line": 79
        },
        {
          "target": "startswith",
          "resolved": false,
          "confidence": 0,
          "line": 82
        },
        {
          "target": "InvalidFileTypeError",
          "resolved": false,
          "confidence": 0,
          "line": 84
        },
        {
          "target": "startswith",
          "resolved": false,
          "confidence": 0,
          "line": 87
        },
        {
          "target": "startswith",
          "resolved": false,
          "confidence": 0,
          "line": 87
        },
        {
          "target": "InvalidFileTypeError",
          "resolved": false,
          "confidence": 0,
          "line": 89
        },
        {
          "target": "startswith",
          "resolved": false,
          "confidence": 0,
          "line": 92
        },
        {
          "target": "InvalidFileTypeError",
          "resolved": false,
          "confidence": 0,
          "line": 94
        },
        {
          "target": "InvalidFileTypeError",
          "resolved": false,
          "confidence": 0,
          "line": 98
        },
        {
          "target": "startswith",
          "resolved": false,
          "confidence": 0,
          "line": 102
        },
        {
          "target": "InvalidFileTypeError",
          "resolved": false,
          "confidence": 0,
          "line": 104
        },
        {
          "target": "startswith",
          "resolved": false,
          "confidence": 0,
          "line": 107
        },
        {
          "target": "InvalidFileTypeError",
          "resolved": false,
          "confidence": 0,
          "line": 109
        },
        {
          "target": "InvalidFileTypeError",
          "resolved": false,
          "confidence": 0,
          "line": 113
        },
        {
          "target": "Settings",
          "resolved": false,
          "confidence": 0,
          "line": 115
        },
        {
          "target": "error",
          "resolved": true,
          "confidence": 0.8,
          "line": 119,
          "resolvedId": "backend/util/logging.py:error:49"
        },
        {
          "target": "StorageConfigError",
          "resolved": false,
          "confidence": 0,
          "line": 120
        },
        {
          "target": "warning",
          "resolved": true,
          "confidence": 0.8,
          "line": 134,
          "resolvedId": "backend/util/logging.py:warning:45"
        },
        {
          "target": "InvalidFileTypeError",
          "resolved": false,
          "confidence": 0,
          "line": 135
        },
        {
          "target": "read",
          "resolved": false,
          "confidence": 0,
          "line": 144
        },
        {
          "target": "chunk_size",
          "resolved": false,
          "confidence": 0,
          "line": 144
        },
        {
          "target": "len",
          "resolved": false,
          "confidence": 0,
          "line": 145
        },
        {
          "target": "chunk",
          "resolved": false,
          "confidence": 0,
          "line": 145
        },
        {
          "target": "warning",
          "resolved": true,
          "confidence": 0.8,
          "line": 147,
          "resolvedId": "backend/util/logging.py:warning:45"
        },
        {
          "target": "FileSizeTooLargeError",
          "resolved": false,
          "confidence": 0,
          "line": 148
        },
        {
          "target": "error",
          "resolved": true,
          "confidence": 0.8,
          "line": 154,
          "resolvedId": "backend/util/logging.py:error:49"
        },
        {
          "target": "str",
          "resolved": false,
          "confidence": 0,
          "line": 154
        },
        {
          "target": "e",
          "resolved": false,
          "confidence": 0,
          "line": 154
        },
        {
          "target": "FileReadError",
          "resolved": false,
          "confidence": 0,
          "line": 155
        },
        {
          "target": "seek",
          "resolved": false,
          "confidence": 0,
          "line": 158
        },
        {
          "target": "lower",
          "resolved": false,
          "confidence": 0,
          "line": 162
        },
        {
          "target": "splitext",
          "resolved": false,
          "confidence": 0,
          "line": 162
        },
        {
          "target": "filename",
          "resolved": false,
          "confidence": 0,
          "line": 162
        },
        {
          "target": "uuid4",
          "resolved": false,
          "confidence": 0,
          "line": 166
        },
        {
          "target": "Storage",
          "resolved": false,
          "confidence": 0,
          "line": 173
        },
        {
          "target": "read",
          "resolved": false,
          "confidence": 0,
          "line": 176
        },
        {
          "target": "scan_content_safe",
          "resolved": true,
          "confidence": 0.8,
          "line": 177,
          "resolvedId": "backend/util/virus_scanner.py:scan_content_safe:191"
        },
        {
          "target": "file_bytes",
          "resolved": false,
          "confidence": 0,
          "line": 177
        },
        {
          "target": "upload",
          "resolved": false,
          "confidence": 0,
          "line": 180
        },
        {
          "target": "bucket_name",
          "resolved": false,
          "confidence": 0,
          "line": 181
        },
        {
          "target": "storage_path",
          "resolved": false,
          "confidence": 0,
          "line": 181
        },
        {
          "target": "file_bytes",
          "resolved": false,
          "confidence": 0,
          "line": 181
        },
        {
          "target": "info",
          "resolved": true,
          "confidence": 0.8,
          "line": 189,
          "resolvedId": "backend/util/logging.py:info:41"
        },
        {
          "target": "error",
          "resolved": true,
          "confidence": 0.8,
          "line": 193,
          "resolvedId": "backend/util/logging.py:error:49"
        },
        {
          "target": "str",
          "resolved": false,
          "confidence": 0,
          "line": 193
        },
        {
          "target": "e",
          "resolved": false,
          "confidence": 0,
          "line": 193
        },
        {
          "target": "StorageUploadError",
          "resolved": false,
          "confidence": 0,
          "line": 194
        },
        {
          "target": "exception",
          "resolved": true,
          "confidence": 0.8,
          "line": 201,
          "resolvedId": "backend/util/logging.py:exception:57"
        },
        {
          "target": "MediaUploadError",
          "resolved": false,
          "confidence": 0,
          "line": 202
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/media.py:__module__:1",
      "name": "__module__",
      "startLine": 1,
      "endLine": 205,
      "isEntryPoint": false,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "getLogger",
          "resolved": false,
          "confidence": 0,
          "line": 14
        },
        {
          "target": "Settings",
          "resolved": false,
          "confidence": 0,
          "line": 33
        },
        {
          "target": "MissingConfigError",
          "resolved": false,
          "confidence": 0,
          "line": 35
        },
        {
          "target": "Storage",
          "resolved": false,
          "confidence": 0,
          "line": 37
        },
        {
          "target": "download_metadata",
          "resolved": false,
          "confidence": 0,
          "line": 43
        },
        {
          "target": "bucket_name",
          "resolved": false,
          "confidence": 0,
          "line": 43
        },
        {
          "target": "image_path",
          "resolved": false,
          "confidence": 0,
          "line": 43
        },
        {
          "target": "download_metadata",
          "resolved": false,
          "confidence": 0,
          "line": 53
        },
        {
          "target": "bucket_name",
          "resolved": false,
          "confidence": 0,
          "line": 53
        },
        {
          "target": "video_path",
          "resolved": false,
          "confidence": 0,
          "line": 53
        },
        {
          "target": "read",
          "resolved": false,
          "confidence": 0,
          "line": 68
        },
        {
          "target": "seek",
          "resolved": false,
          "confidence": 0,
          "line": 69
        },
        {
          "target": "error",
          "resolved": true,
          "confidence": 0.8,
          "line": 71,
          "resolvedId": "backend/util/logging.py:error:49"
        },
        {
          "target": "str",
          "resolved": false,
          "confidence": 0,
          "line": 71
        },
        {
          "target": "e",
          "resolved": false,
          "confidence": 0,
          "line": 71
        },
        {
          "target": "FileReadError",
          "resolved": false,
          "confidence": 0,
          "line": 72
        },
        {
          "target": "startswith",
          "resolved": false,
          "confidence": 0,
          "line": 77
        },
        {
          "target": "InvalidFileTypeError",
          "resolved": false,
          "confidence": 0,
          "line": 79
        },
        {
          "target": "startswith",
          "resolved": false,
          "confidence": 0,
          "line": 82
        },
        {
          "target": "InvalidFileTypeError",
          "resolved": false,
          "confidence": 0,
          "line": 84
        },
        {
          "target": "startswith",
          "resolved": false,
          "confidence": 0,
          "line": 87
        },
        {
          "target": "startswith",
          "resolved": false,
          "confidence": 0,
          "line": 87
        },
        {
          "target": "InvalidFileTypeError",
          "resolved": false,
          "confidence": 0,
          "line": 89
        },
        {
          "target": "startswith",
          "resolved": false,
          "confidence": 0,
          "line": 92
        },
        {
          "target": "InvalidFileTypeError",
          "resolved": false,
          "confidence": 0,
          "line": 94
        },
        {
          "target": "InvalidFileTypeError",
          "resolved": false,
          "confidence": 0,
          "line": 98
        },
        {
          "target": "startswith",
          "resolved": false,
          "confidence": 0,
          "line": 102
        },
        {
          "target": "InvalidFileTypeError",
          "resolved": false,
          "confidence": 0,
          "line": 104
        },
        {
          "target": "startswith",
          "resolved": false,
          "confidence": 0,
          "line": 107
        },
        {
          "target": "InvalidFileTypeError",
          "resolved": false,
          "confidence": 0,
          "line": 109
        },
        {
          "target": "InvalidFileTypeError",
          "resolved": false,
          "confidence": 0,
          "line": 113
        },
        {
          "target": "Settings",
          "resolved": false,
          "confidence": 0,
          "line": 115
        },
        {
          "target": "error",
          "resolved": true,
          "confidence": 0.8,
          "line": 119,
          "resolvedId": "backend/util/logging.py:error:49"
        },
        {
          "target": "StorageConfigError",
          "resolved": false,
          "confidence": 0,
          "line": 120
        },
        {
          "target": "warning",
          "resolved": true,
          "confidence": 0.8,
          "line": 134,
          "resolvedId": "backend/util/logging.py:warning:45"
        },
        {
          "target": "InvalidFileTypeError",
          "resolved": false,
          "confidence": 0,
          "line": 135
        },
        {
          "target": "read",
          "resolved": false,
          "confidence": 0,
          "line": 144
        },
        {
          "target": "chunk_size",
          "resolved": false,
          "confidence": 0,
          "line": 144
        },
        {
          "target": "len",
          "resolved": false,
          "confidence": 0,
          "line": 145
        },
        {
          "target": "chunk",
          "resolved": false,
          "confidence": 0,
          "line": 145
        },
        {
          "target": "warning",
          "resolved": true,
          "confidence": 0.8,
          "line": 147,
          "resolvedId": "backend/util/logging.py:warning:45"
        },
        {
          "target": "FileSizeTooLargeError",
          "resolved": false,
          "confidence": 0,
          "line": 148
        },
        {
          "target": "error",
          "resolved": true,
          "confidence": 0.8,
          "line": 154,
          "resolvedId": "backend/util/logging.py:error:49"
        },
        {
          "target": "str",
          "resolved": false,
          "confidence": 0,
          "line": 154
        },
        {
          "target": "e",
          "resolved": false,
          "confidence": 0,
          "line": 154
        },
        {
          "target": "FileReadError",
          "resolved": false,
          "confidence": 0,
          "line": 155
        },
        {
          "target": "seek",
          "resolved": false,
          "confidence": 0,
          "line": 158
        },
        {
          "target": "lower",
          "resolved": false,
          "confidence": 0,
          "line": 162
        },
        {
          "target": "splitext",
          "resolved": false,
          "confidence": 0,
          "line": 162
        },
        {
          "target": "filename",
          "resolved": false,
          "confidence": 0,
          "line": 162
        },
        {
          "target": "uuid4",
          "resolved": false,
          "confidence": 0,
          "line": 166
        },
        {
          "target": "Storage",
          "resolved": false,
          "confidence": 0,
          "line": 173
        },
        {
          "target": "read",
          "resolved": false,
          "confidence": 0,
          "line": 176
        },
        {
          "target": "scan_content_safe",
          "resolved": true,
          "confidence": 0.8,
          "line": 177,
          "resolvedId": "backend/util/virus_scanner.py:scan_content_safe:191"
        },
        {
          "target": "file_bytes",
          "resolved": false,
          "confidence": 0,
          "line": 177
        },
        {
          "target": "upload",
          "resolved": false,
          "confidence": 0,
          "line": 180
        },
        {
          "target": "bucket_name",
          "resolved": false,
          "confidence": 0,
          "line": 181
        },
        {
          "target": "storage_path",
          "resolved": false,
          "confidence": 0,
          "line": 181
        },
        {
          "target": "file_bytes",
          "resolved": false,
          "confidence": 0,
          "line": 181
        },
        {
          "target": "info",
          "resolved": true,
          "confidence": 0.8,
          "line": 189,
          "resolvedId": "backend/util/logging.py:info:41"
        },
        {
          "target": "error",
          "resolved": true,
          "confidence": 0.8,
          "line": 193,
          "resolvedId": "backend/util/logging.py:error:49"
        },
        {
          "target": "str",
          "resolved": false,
          "confidence": 0,
          "line": 193
        },
        {
          "target": "e",
          "resolved": false,
          "confidence": 0,
          "line": 193
        },
        {
          "target": "StorageUploadError",
          "resolved": false,
          "confidence": 0,
          "line": 194
        },
        {
          "target": "exception",
          "resolved": true,
          "confidence": 0.8,
          "line": 201,
          "resolvedId": "backend/util/logging.py:exception:57"
        },
        {
          "target": "MediaUploadError",
          "resolved": false,
          "confidence": 0,
          "line": 202
        },
        {
          "target": "getLogger",
          "resolved": false,
          "confidence": 0,
          "line": 14
        }
      ],
      "calledBy": [],
      "dataAccess": []
    }
  ]
}
{
  "version": "1.0.0",
  "generatedAt": "2026-01-29T07:19:14.131Z",
  "checksum": "84d7b48473d6a7c0",
  "file": "backend/api/features/store/media_test.py",
  "functions": [
    {
      "id": "backend/api/features/store/media_test.py:mock_settings:16",
      "name": "mock_settings",
      "startLine": 16,
      "endLine": 21,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "Settings",
          "resolved": false,
          "confidence": 0,
          "line": 17
        },
        {
          "target": "setattr",
          "resolved": false,
          "confidence": 0,
          "line": 20
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/media_test.py:mock_storage_client:25",
      "name": "mock_storage_client",
      "startLine": 25,
      "endLine": 45,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 27
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 28
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 31
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 32
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 35,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 41,
          "resolvedId": "backend/util/request.py:patch:578"
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/media_test.py:test_upload_media_success:48",
      "name": "test_upload_media_success",
      "startLine": 48,
      "endLine": 64,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "UploadFile",
          "resolved": false,
          "confidence": 0,
          "line": 52
        },
        {
          "target": "BytesIO",
          "resolved": false,
          "confidence": 0,
          "line": 54
        },
        {
          "target": "test_data",
          "resolved": false,
          "confidence": 0,
          "line": 54
        },
        {
          "target": "Headers",
          "resolved": false,
          "confidence": 0,
          "line": 55
        },
        {
          "target": "upload_media",
          "resolved": true,
          "confidence": 0.8,
          "line": 58,
          "resolvedId": "backend/api/features/store/media.py:upload_media:63"
        },
        {
          "target": "test_file",
          "resolved": false,
          "confidence": 0,
          "line": 58
        },
        {
          "target": "startswith",
          "resolved": false,
          "confidence": 0,
          "line": 60
        },
        {
          "target": "endswith",
          "resolved": false,
          "confidence": 0,
          "line": 63
        },
        {
          "target": "assert_called_once",
          "resolved": false,
          "confidence": 0,
          "line": 64
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/media_test.py:test_upload_media_invalid_type:67",
      "name": "test_upload_media_invalid_type",
      "startLine": 67,
      "endLine": 77,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "UploadFile",
          "resolved": false,
          "confidence": 0,
          "line": 68
        },
        {
          "target": "BytesIO",
          "resolved": false,
          "confidence": 0,
          "line": 70
        },
        {
          "target": "Headers",
          "resolved": false,
          "confidence": 0,
          "line": 71
        },
        {
          "target": "raises",
          "resolved": false,
          "confidence": 0,
          "line": 74
        },
        {
          "target": "upload_media",
          "resolved": true,
          "confidence": 0.8,
          "line": 75,
          "resolvedId": "backend/api/features/store/media.py:upload_media:63"
        },
        {
          "target": "test_file",
          "resolved": false,
          "confidence": 0,
          "line": 75
        },
        {
          "target": "assert_not_called",
          "resolved": false,
          "confidence": 0,
          "line": 77
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/media_test.py:test_upload_media_missing_credentials:80",
      "name": "test_upload_media_missing_credentials",
      "startLine": 80,
      "endLine": 93,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "Settings",
          "resolved": false,
          "confidence": 0,
          "line": 81
        },
        {
          "target": "setattr",
          "resolved": false,
          "confidence": 0,
          "line": 84
        },
        {
          "target": "UploadFile",
          "resolved": false,
          "confidence": 0,
          "line": 86
        },
        {
          "target": "BytesIO",
          "resolved": false,
          "confidence": 0,
          "line": 88
        },
        {
          "target": "Headers",
          "resolved": false,
          "confidence": 0,
          "line": 89
        },
        {
          "target": "raises",
          "resolved": false,
          "confidence": 0,
          "line": 92
        },
        {
          "target": "upload_media",
          "resolved": true,
          "confidence": 0.8,
          "line": 93,
          "resolvedId": "backend/api/features/store/media.py:upload_media:63"
        },
        {
          "target": "test_file",
          "resolved": false,
          "confidence": 0,
          "line": 93
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/media_test.py:test_upload_media_video_type:96",
      "name": "test_upload_media_video_type",
      "startLine": 96,
      "endLine": 109,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "UploadFile",
          "resolved": false,
          "confidence": 0,
          "line": 97
        },
        {
          "target": "BytesIO",
          "resolved": false,
          "confidence": 0,
          "line": 99
        },
        {
          "target": "Headers",
          "resolved": false,
          "confidence": 0,
          "line": 100
        },
        {
          "target": "upload_media",
          "resolved": true,
          "confidence": 0.8,
          "line": 103,
          "resolvedId": "backend/api/features/store/media.py:upload_media:63"
        },
        {
          "target": "test_file",
          "resolved": false,
          "confidence": 0,
          "line": 103
        },
        {
          "target": "startswith",
          "resolved": false,
          "confidence": 0,
          "line": 105
        },
        {
          "target": "endswith",
          "resolved": false,
          "confidence": 0,
          "line": 108
        },
        {
          "target": "assert_called_once",
          "resolved": false,
          "confidence": 0,
          "line": 109
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/media_test.py:test_upload_media_file_too_large:112",
      "name": "test_upload_media_file_too_large",
      "startLine": 112,
      "endLine": 123,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "UploadFile",
          "resolved": false,
          "confidence": 0,
          "line": 116
        },
        {
          "target": "BytesIO",
          "resolved": false,
          "confidence": 0,
          "line": 118
        },
        {
          "target": "large_data",
          "resolved": false,
          "confidence": 0,
          "line": 118
        },
        {
          "target": "Headers",
          "resolved": false,
          "confidence": 0,
          "line": 119
        },
        {
          "target": "raises",
          "resolved": false,
          "confidence": 0,
          "line": 122
        },
        {
          "target": "upload_media",
          "resolved": true,
          "confidence": 0.8,
          "line": 123,
          "resolvedId": "backend/api/features/store/media.py:upload_media:63"
        },
        {
          "target": "test_file",
          "resolved": false,
          "confidence": 0,
          "line": 123
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/media_test.py:test_upload_media_file_read_error:126",
      "name": "test_upload_media_file_read_error",
      "startLine": 126,
      "endLine": 135,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "UploadFile",
          "resolved": false,
          "confidence": 0,
          "line": 127
        },
        {
          "target": "BytesIO",
          "resolved": false,
          "confidence": 0,
          "line": 129
        },
        {
          "target": "Headers",
          "resolved": false,
          "confidence": 0,
          "line": 130
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 132
        },
        {
          "target": "Exception",
          "resolved": false,
          "confidence": 0,
          "line": 132
        },
        {
          "target": "raises",
          "resolved": false,
          "confidence": 0,
          "line": 134
        },
        {
          "target": "upload_media",
          "resolved": true,
          "confidence": 0.8,
          "line": 135,
          "resolvedId": "backend/api/features/store/media.py:upload_media:63"
        },
        {
          "target": "test_file",
          "resolved": false,
          "confidence": 0,
          "line": 135
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/media_test.py:test_upload_media_png_success:138",
      "name": "test_upload_media_png_success",
      "startLine": 138,
      "endLine": 149,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "UploadFile",
          "resolved": false,
          "confidence": 0,
          "line": 139
        },
        {
          "target": "BytesIO",
          "resolved": false,
          "confidence": 0,
          "line": 141
        },
        {
          "target": "Headers",
          "resolved": false,
          "confidence": 0,
          "line": 142
        },
        {
          "target": "upload_media",
          "resolved": true,
          "confidence": 0.8,
          "line": 145,
          "resolvedId": "backend/api/features/store/media.py:upload_media:63"
        },
        {
          "target": "test_file",
          "resolved": false,
          "confidence": 0,
          "line": 145
        },
        {
          "target": "startswith",
          "resolved": false,
          "confidence": 0,
          "line": 146
        },
        {
          "target": "endswith",
          "resolved": false,
          "confidence": 0,
          "line": 149
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/media_test.py:test_upload_media_gif_success:152",
      "name": "test_upload_media_gif_success",
      "startLine": 152,
      "endLine": 163,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "UploadFile",
          "resolved": false,
          "confidence": 0,
          "line": 153
        },
        {
          "target": "BytesIO",
          "resolved": false,
          "confidence": 0,
          "line": 155
        },
        {
          "target": "Headers",
          "resolved": false,
          "confidence": 0,
          "line": 156
        },
        {
          "target": "upload_media",
          "resolved": true,
          "confidence": 0.8,
          "line": 159,
          "resolvedId": "backend/api/features/store/media.py:upload_media:63"
        },
        {
          "target": "test_file",
          "resolved": false,
          "confidence": 0,
          "line": 159
        },
        {
          "target": "startswith",
          "resolved": false,
          "confidence": 0,
          "line": 160
        },
        {
          "target": "endswith",
          "resolved": false,
          "confidence": 0,
          "line": 163
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/media_test.py:test_upload_media_webp_success:166",
      "name": "test_upload_media_webp_success",
      "startLine": 166,
      "endLine": 177,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "UploadFile",
          "resolved": false,
          "confidence": 0,
          "line": 167
        },
        {
          "target": "BytesIO",
          "resolved": false,
          "confidence": 0,
          "line": 169
        },
        {
          "target": "Headers",
          "resolved": false,
          "confidence": 0,
          "line": 170
        },
        {
          "target": "upload_media",
          "resolved": true,
          "confidence": 0.8,
          "line": 173,
          "resolvedId": "backend/api/features/store/media.py:upload_media:63"
        },
        {
          "target": "test_file",
          "resolved": false,
          "confidence": 0,
          "line": 173
        },
        {
          "target": "startswith",
          "resolved": false,
          "confidence": 0,
          "line": 174
        },
        {
          "target": "endswith",
          "resolved": false,
          "confidence": 0,
          "line": 177
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/media_test.py:test_upload_media_webm_success:180",
      "name": "test_upload_media_webm_success",
      "startLine": 180,
      "endLine": 191,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "UploadFile",
          "resolved": false,
          "confidence": 0,
          "line": 181
        },
        {
          "target": "BytesIO",
          "resolved": false,
          "confidence": 0,
          "line": 183
        },
        {
          "target": "Headers",
          "resolved": false,
          "confidence": 0,
          "line": 184
        },
        {
          "target": "upload_media",
          "resolved": true,
          "confidence": 0.8,
          "line": 187,
          "resolvedId": "backend/api/features/store/media.py:upload_media:63"
        },
        {
          "target": "test_file",
          "resolved": false,
          "confidence": 0,
          "line": 187
        },
        {
          "target": "startswith",
          "resolved": false,
          "confidence": 0,
          "line": 188
        },
        {
          "target": "endswith",
          "resolved": false,
          "confidence": 0,
          "line": 191
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/media_test.py:test_upload_media_mismatched_signature:194",
      "name": "test_upload_media_mismatched_signature",
      "startLine": 194,
      "endLine": 202,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "UploadFile",
          "resolved": false,
          "confidence": 0,
          "line": 195
        },
        {
          "target": "BytesIO",
          "resolved": false,
          "confidence": 0,
          "line": 197
        },
        {
          "target": "Headers",
          "resolved": false,
          "confidence": 0,
          "line": 198
        },
        {
          "target": "raises",
          "resolved": false,
          "confidence": 0,
          "line": 201
        },
        {
          "target": "upload_media",
          "resolved": true,
          "confidence": 0.8,
          "line": 202,
          "resolvedId": "backend/api/features/store/media.py:upload_media:63"
        },
        {
          "target": "test_file",
          "resolved": false,
          "confidence": 0,
          "line": 202
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/store/media_test.py:test_upload_media_invalid_signature:205",
      "name": "test_upload_media_invalid_signature",
      "startLine": 205,
      "endLine": 213,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "UploadFile",
          "resolved": false,
          "confidence": 0,
          "line": 206
        },
        {
          "target": "BytesIO",
          "resolved": false,
          "confidence": 0,
          "line": 208
        },
        {
          "target": "Headers",
          "resolved": false,
          "confidence": 0,
          "line": 209
        },
        {
          "target": "raises",
          "resolved": false,
          "confidence": 0,
          "line": 212
        },
        {
          "target": "upload_media",
          "resolved": true,
          "confidence": 0.8,
          "line": 213,
          "resolvedId": "backend/api/features/store/media.py:upload_media:63"
        },
        {
          "target": "test_file",
          "resolved": false,
          "confidence": 0,
          "line": 213
        }
      ],
      "calledBy": [],
      "dataAccess": []
    }
  ]
}
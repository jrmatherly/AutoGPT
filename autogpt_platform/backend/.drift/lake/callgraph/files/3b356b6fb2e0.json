{
  "version": "1.0.0",
  "generatedAt": "2026-01-29T07:19:14.147Z",
  "checksum": "fbeb2d4ed7330e37",
  "file": "backend/api/features/admin/credit_admin_routes_test.py",
  "functions": [
    {
      "id": "backend/api/features/admin/credit_admin_routes_test.py:setup_app_admin_auth:26",
      "name": "setup_app_admin_auth",
      "startLine": 26,
      "endLine": 30,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "clear",
          "resolved": true,
          "confidence": 0.8,
          "line": 30,
          "resolvedId": "backend/sdk/registry.py:clear:155"
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/admin/credit_admin_routes_test.py:test_add_user_credits_success:33",
      "name": "test_add_user_credits_success",
      "startLine": 33,
      "endLine": 84,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "Mock",
          "resolved": false,
          "confidence": 0,
          "line": 41
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 42
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 45,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "post",
          "resolved": true,
          "confidence": 0.8,
          "line": 56,
          "resolvedId": "backend/util/request.py:post:563"
        },
        {
          "target": "json",
          "resolved": true,
          "confidence": 0.8,
          "line": 59,
          "resolvedId": "backend/util/request.py:json:289"
        },
        {
          "target": "assert_called_once",
          "resolved": false,
          "confidence": 0,
          "line": 64
        },
        {
          "target": "isinstance",
          "resolved": false,
          "confidence": 0,
          "line": 69
        },
        {
          "target": "assert_match",
          "resolved": false,
          "confidence": 0,
          "line": 81
        },
        {
          "target": "dumps",
          "resolved": true,
          "confidence": 0.8,
          "line": 82,
          "resolvedId": "backend/util/json.py:dumps:20"
        },
        {
          "target": "response_data",
          "resolved": false,
          "confidence": 0,
          "line": 82
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/admin/credit_admin_routes_test.py:test_add_user_credits_negative_amount:87",
      "name": "test_add_user_credits_negative_amount",
      "startLine": 87,
      "endLine": 119,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "Mock",
          "resolved": false,
          "confidence": 0,
          "line": 93
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 94
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 97,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "post",
          "resolved": true,
          "confidence": 0.8,
          "line": 108,
          "resolvedId": "backend/util/request.py:post:563"
        },
        {
          "target": "json",
          "resolved": true,
          "confidence": 0.8,
          "line": 111,
          "resolvedId": "backend/util/request.py:json:289"
        },
        {
          "target": "assert_match",
          "resolved": false,
          "confidence": 0,
          "line": 116
        },
        {
          "target": "dumps",
          "resolved": true,
          "confidence": 0.8,
          "line": 117,
          "resolvedId": "backend/util/json.py:dumps:20"
        },
        {
          "target": "response_data",
          "resolved": false,
          "confidence": 0,
          "line": 117
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/admin/credit_admin_routes_test.py:test_get_user_history_success:122",
      "name": "test_get_user_history_success",
      "startLine": 122,
      "endLine": 170,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "UserHistoryResponse",
          "resolved": false,
          "confidence": 0,
          "line": 128
        },
        {
          "target": "UserTransaction",
          "resolved": false,
          "confidence": 0,
          "line": 130
        },
        {
          "target": "UserTransaction",
          "resolved": false,
          "confidence": 0,
          "line": 137
        },
        {
          "target": "Pagination",
          "resolved": false,
          "confidence": 0,
          "line": 145
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 153,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 158,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "json",
          "resolved": true,
          "confidence": 0.8,
          "line": 161,
          "resolvedId": "backend/util/request.py:json:289"
        },
        {
          "target": "len",
          "resolved": false,
          "confidence": 0,
          "line": 162
        },
        {
          "target": "assert_match",
          "resolved": false,
          "confidence": 0,
          "line": 167
        },
        {
          "target": "dumps",
          "resolved": true,
          "confidence": 0.8,
          "line": 168,
          "resolvedId": "backend/util/json.py:dumps:20"
        },
        {
          "target": "response_data",
          "resolved": false,
          "confidence": 0,
          "line": 168
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/admin/credit_admin_routes_test.py:test_get_user_history_with_filters:173",
      "name": "test_get_user_history_with_filters",
      "startLine": 173,
      "endLine": 230,
      "isEntryPoint": true,
      "isDataAccessor": true,
      "calls": [
        {
          "target": "UserHistoryResponse",
          "resolved": false,
          "confidence": 0,
          "line": 179
        },
        {
          "target": "UserTransaction",
          "resolved": false,
          "confidence": 0,
          "line": 181
        },
        {
          "target": "Pagination",
          "resolved": false,
          "confidence": 0,
          "line": 189
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 197,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 202,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "json",
          "resolved": true,
          "confidence": 0.8,
          "line": 213,
          "resolvedId": "backend/util/request.py:json:289"
        },
        {
          "target": "len",
          "resolved": false,
          "confidence": 0,
          "line": 214
        },
        {
          "target": "assert_called_once_with",
          "resolved": false,
          "confidence": 0,
          "line": 218
        },
        {
          "target": "assert_match",
          "resolved": false,
          "confidence": 0,
          "line": 227
        },
        {
          "target": "dumps",
          "resolved": true,
          "confidence": 0.8,
          "line": 228,
          "resolvedId": "backend/util/json.py:dumps:20"
        },
        {
          "target": "response_data",
          "resolved": false,
          "confidence": 0,
          "line": 228
        }
      ],
      "calledBy": [],
      "dataAccess": [
        {
          "table": "search",
          "operation": "read",
          "line": 202,
          "fields": []
        }
      ]
    },
    {
      "id": "backend/api/features/admin/credit_admin_routes_test.py:test_get_user_history_empty_results:233",
      "name": "test_get_user_history_empty_results",
      "startLine": 233,
      "endLine": 266,
      "isEntryPoint": true,
      "isDataAccessor": true,
      "calls": [
        {
          "target": "UserHistoryResponse",
          "resolved": false,
          "confidence": 0,
          "line": 239
        },
        {
          "target": "Pagination",
          "resolved": false,
          "confidence": 0,
          "line": 241
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 249,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 254,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "json",
          "resolved": true,
          "confidence": 0.8,
          "line": 257,
          "resolvedId": "backend/util/request.py:json:289"
        },
        {
          "target": "len",
          "resolved": false,
          "confidence": 0,
          "line": 258
        },
        {
          "target": "assert_match",
          "resolved": false,
          "confidence": 0,
          "line": 263
        },
        {
          "target": "dumps",
          "resolved": true,
          "confidence": 0.8,
          "line": 264,
          "resolvedId": "backend/util/json.py:dumps:20"
        },
        {
          "target": "response_data",
          "resolved": false,
          "confidence": 0,
          "line": 264
        }
      ],
      "calledBy": [],
      "dataAccess": [
        {
          "table": "search",
          "operation": "read",
          "line": 254,
          "fields": []
        }
      ]
    },
    {
      "id": "backend/api/features/admin/credit_admin_routes_test.py:test_add_credits_invalid_request:269",
      "name": "test_add_credits_invalid_request",
      "startLine": 269,
      "endLine": 294,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "post",
          "resolved": true,
          "confidence": 0.8,
          "line": 272,
          "resolvedId": "backend/util/request.py:post:563"
        },
        {
          "target": "post",
          "resolved": true,
          "confidence": 0.8,
          "line": 276,
          "resolvedId": "backend/util/request.py:post:563"
        },
        {
          "target": "post",
          "resolved": true,
          "confidence": 0.8,
          "line": 287,
          "resolvedId": "backend/util/request.py:post:563"
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/admin/credit_admin_routes_test.py:test_admin_endpoints_require_admin_role:297",
      "name": "test_admin_endpoints_require_admin_role",
      "startLine": 297,
      "endLine": 315,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "post",
          "resolved": true,
          "confidence": 0.8,
          "line": 303,
          "resolvedId": "backend/util/request.py:post:563"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 314,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/api/features/admin/credit_admin_routes_test.py:__module__:1",
      "name": "__module__",
      "startLine": 1,
      "endLine": 316,
      "isEntryPoint": false,
      "isDataAccessor": true,
      "calls": [
        {
          "target": "FastAPI",
          "resolved": false,
          "confidence": 0,
          "line": 19
        },
        {
          "target": "include_router",
          "resolved": false,
          "confidence": 0,
          "line": 20
        },
        {
          "target": "TestClient",
          "resolved": false,
          "confidence": 0,
          "line": 22
        },
        {
          "target": "fixture",
          "resolved": false,
          "confidence": 0,
          "line": 25
        },
        {
          "target": "clear",
          "resolved": true,
          "confidence": 0.8,
          "line": 30,
          "resolvedId": "backend/sdk/registry.py:clear:155"
        },
        {
          "target": "Mock",
          "resolved": false,
          "confidence": 0,
          "line": 41
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 42
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 45,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "post",
          "resolved": true,
          "confidence": 0.8,
          "line": 56,
          "resolvedId": "backend/util/request.py:post:563"
        },
        {
          "target": "json",
          "resolved": true,
          "confidence": 0.8,
          "line": 59,
          "resolvedId": "backend/util/request.py:json:289"
        },
        {
          "target": "assert_called_once",
          "resolved": false,
          "confidence": 0,
          "line": 64
        },
        {
          "target": "isinstance",
          "resolved": false,
          "confidence": 0,
          "line": 69
        },
        {
          "target": "assert_match",
          "resolved": false,
          "confidence": 0,
          "line": 81
        },
        {
          "target": "dumps",
          "resolved": true,
          "confidence": 0.8,
          "line": 82,
          "resolvedId": "backend/util/json.py:dumps:20"
        },
        {
          "target": "response_data",
          "resolved": false,
          "confidence": 0,
          "line": 82
        },
        {
          "target": "Mock",
          "resolved": false,
          "confidence": 0,
          "line": 93
        },
        {
          "target": "AsyncMock",
          "resolved": false,
          "confidence": 0,
          "line": 94
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 97,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "post",
          "resolved": true,
          "confidence": 0.8,
          "line": 108,
          "resolvedId": "backend/util/request.py:post:563"
        },
        {
          "target": "json",
          "resolved": true,
          "confidence": 0.8,
          "line": 111,
          "resolvedId": "backend/util/request.py:json:289"
        },
        {
          "target": "assert_match",
          "resolved": false,
          "confidence": 0,
          "line": 116
        },
        {
          "target": "dumps",
          "resolved": true,
          "confidence": 0.8,
          "line": 117,
          "resolvedId": "backend/util/json.py:dumps:20"
        },
        {
          "target": "response_data",
          "resolved": false,
          "confidence": 0,
          "line": 117
        },
        {
          "target": "UserHistoryResponse",
          "resolved": false,
          "confidence": 0,
          "line": 128
        },
        {
          "target": "UserTransaction",
          "resolved": false,
          "confidence": 0,
          "line": 130
        },
        {
          "target": "UserTransaction",
          "resolved": false,
          "confidence": 0,
          "line": 137
        },
        {
          "target": "Pagination",
          "resolved": false,
          "confidence": 0,
          "line": 145
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 153,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 158,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "json",
          "resolved": true,
          "confidence": 0.8,
          "line": 161,
          "resolvedId": "backend/util/request.py:json:289"
        },
        {
          "target": "len",
          "resolved": false,
          "confidence": 0,
          "line": 162
        },
        {
          "target": "assert_match",
          "resolved": false,
          "confidence": 0,
          "line": 167
        },
        {
          "target": "dumps",
          "resolved": true,
          "confidence": 0.8,
          "line": 168,
          "resolvedId": "backend/util/json.py:dumps:20"
        },
        {
          "target": "response_data",
          "resolved": false,
          "confidence": 0,
          "line": 168
        },
        {
          "target": "UserHistoryResponse",
          "resolved": false,
          "confidence": 0,
          "line": 179
        },
        {
          "target": "UserTransaction",
          "resolved": false,
          "confidence": 0,
          "line": 181
        },
        {
          "target": "Pagination",
          "resolved": false,
          "confidence": 0,
          "line": 189
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 197,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 202,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "json",
          "resolved": true,
          "confidence": 0.8,
          "line": 213,
          "resolvedId": "backend/util/request.py:json:289"
        },
        {
          "target": "len",
          "resolved": false,
          "confidence": 0,
          "line": 214
        },
        {
          "target": "assert_called_once_with",
          "resolved": false,
          "confidence": 0,
          "line": 218
        },
        {
          "target": "assert_match",
          "resolved": false,
          "confidence": 0,
          "line": 227
        },
        {
          "target": "dumps",
          "resolved": true,
          "confidence": 0.8,
          "line": 228,
          "resolvedId": "backend/util/json.py:dumps:20"
        },
        {
          "target": "response_data",
          "resolved": false,
          "confidence": 0,
          "line": 228
        },
        {
          "target": "UserHistoryResponse",
          "resolved": false,
          "confidence": 0,
          "line": 239
        },
        {
          "target": "Pagination",
          "resolved": false,
          "confidence": 0,
          "line": 241
        },
        {
          "target": "patch",
          "resolved": true,
          "confidence": 0.8,
          "line": 249,
          "resolvedId": "backend/util/request.py:patch:578"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 254,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "json",
          "resolved": true,
          "confidence": 0.8,
          "line": 257,
          "resolvedId": "backend/util/request.py:json:289"
        },
        {
          "target": "len",
          "resolved": false,
          "confidence": 0,
          "line": 258
        },
        {
          "target": "assert_match",
          "resolved": false,
          "confidence": 0,
          "line": 263
        },
        {
          "target": "dumps",
          "resolved": true,
          "confidence": 0.8,
          "line": 264,
          "resolvedId": "backend/util/json.py:dumps:20"
        },
        {
          "target": "response_data",
          "resolved": false,
          "confidence": 0,
          "line": 264
        },
        {
          "target": "post",
          "resolved": true,
          "confidence": 0.8,
          "line": 272,
          "resolvedId": "backend/util/request.py:post:563"
        },
        {
          "target": "post",
          "resolved": true,
          "confidence": 0.8,
          "line": 276,
          "resolvedId": "backend/util/request.py:post:563"
        },
        {
          "target": "post",
          "resolved": true,
          "confidence": 0.8,
          "line": 287,
          "resolvedId": "backend/util/request.py:post:563"
        },
        {
          "target": "post",
          "resolved": true,
          "confidence": 0.8,
          "line": 303,
          "resolvedId": "backend/util/request.py:post:563"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 314,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "FastAPI",
          "resolved": false,
          "confidence": 0,
          "line": 19
        },
        {
          "target": "include_router",
          "resolved": false,
          "confidence": 0,
          "line": 20
        },
        {
          "target": "TestClient",
          "resolved": false,
          "confidence": 0,
          "line": 22
        },
        {
          "target": "fixture",
          "resolved": false,
          "confidence": 0,
          "line": 25
        }
      ],
      "calledBy": [],
      "dataAccess": [
        {
          "table": "search",
          "operation": "read",
          "line": 202,
          "fields": []
        },
        {
          "table": "search",
          "operation": "read",
          "line": 254,
          "fields": []
        }
      ]
    }
  ]
}
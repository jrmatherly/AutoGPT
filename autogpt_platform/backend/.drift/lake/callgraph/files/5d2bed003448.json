{
  "version": "1.0.0",
  "generatedAt": "2026-01-29T07:19:14.161Z",
  "checksum": "db5256b46815496c",
  "file": "backend/util/prompt.py",
  "functions": [
    {
      "id": "backend/util/prompt.py:_tok_len:20",
      "name": "_tok_len",
      "startLine": 20,
      "endLine": 22,
      "isEntryPoint": false,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "len",
          "resolved": false,
          "confidence": 0,
          "line": 22
        },
        {
          "target": "encode",
          "resolved": false,
          "confidence": 0,
          "line": 22
        },
        {
          "target": "str",
          "resolved": false,
          "confidence": 0,
          "line": 22
        },
        {
          "target": "text",
          "resolved": true,
          "confidence": 0.8,
          "line": 22,
          "resolvedId": "backend/util/request.py:text:297"
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/util/prompt.py:_msg_tokens:25",
      "name": "_msg_tokens",
      "startLine": 25,
      "endLine": 70,
      "isEntryPoint": false,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "_tok_len",
          "resolved": true,
          "confidence": 0.95,
          "line": 34,
          "resolvedId": "backend/util/prompt.py:_tok_len:20"
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 34,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 34,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "isinstance",
          "resolved": false,
          "confidence": 0,
          "line": 40
        },
        {
          "target": "list",
          "resolved": false,
          "confidence": 0,
          "line": 40
        },
        {
          "target": "_tok_len",
          "resolved": true,
          "confidence": 0.95,
          "line": 43,
          "resolvedId": "backend/util/prompt.py:_tok_len:20"
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 43,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 43,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "_tok_len",
          "resolved": true,
          "confidence": 0.95,
          "line": 44,
          "resolvedId": "backend/util/prompt.py:_tok_len:20"
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 44,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 44,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "_tok_len",
          "resolved": true,
          "confidence": 0.95,
          "line": 46,
          "resolvedId": "backend/util/prompt.py:_tok_len:20"
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 46,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 46,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "_tok_len",
          "resolved": true,
          "confidence": 0.95,
          "line": 47,
          "resolvedId": "backend/util/prompt.py:_tok_len:20"
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 48,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 48,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 52,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "isinstance",
          "resolved": false,
          "confidence": 0,
          "line": 53
        },
        {
          "target": "content",
          "resolved": false,
          "confidence": 0,
          "line": 53
        },
        {
          "target": "list",
          "resolved": false,
          "confidence": 0,
          "line": 53
        },
        {
          "target": "isinstance",
          "resolved": false,
          "confidence": 0,
          "line": 55
        },
        {
          "target": "item",
          "resolved": false,
          "confidence": 0,
          "line": 55
        },
        {
          "target": "dict",
          "resolved": false,
          "confidence": 0,
          "line": 55
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 55,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "_tok_len",
          "resolved": true,
          "confidence": 0.95,
          "line": 57,
          "resolvedId": "backend/util/prompt.py:_tok_len:20"
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 57,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 57,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "_tok_len",
          "resolved": true,
          "confidence": 0.95,
          "line": 58,
          "resolvedId": "backend/util/prompt.py:_tok_len:20"
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 58,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 58,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "_tok_len",
          "resolved": true,
          "confidence": 0.95,
          "line": 59,
          "resolvedId": "backend/util/prompt.py:_tok_len:20"
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 59,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        },
        {
          "target": "dumps",
          "resolved": true,
          "confidence": 0.8,
          "line": 59,
          "resolvedId": "backend/util/json.py:dumps:20"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 59,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "isinstance",
          "resolved": false,
          "confidence": 0,
          "line": 60
        },
        {
          "target": "item",
          "resolved": false,
          "confidence": 0,
          "line": 60
        },
        {
          "target": "dict",
          "resolved": false,
          "confidence": 0,
          "line": 60
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 60,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "_tok_len",
          "resolved": true,
          "confidence": 0.95,
          "line": 62,
          "resolvedId": "backend/util/prompt.py:_tok_len:20"
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 62,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 62,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "_tok_len",
          "resolved": true,
          "confidence": 0.95,
          "line": 63,
          "resolvedId": "backend/util/prompt.py:_tok_len:20"
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 63,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 63,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "isinstance",
          "resolved": false,
          "confidence": 0,
          "line": 64
        },
        {
          "target": "item",
          "resolved": false,
          "confidence": 0,
          "line": 64
        },
        {
          "target": "dict",
          "resolved": false,
          "confidence": 0,
          "line": 64
        },
        {
          "target": "_tok_len",
          "resolved": true,
          "confidence": 0.95,
          "line": 66,
          "resolvedId": "backend/util/prompt.py:_tok_len:20"
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 66,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 66,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/util/prompt.py:_is_tool_message:73",
      "name": "_is_tool_message",
      "startLine": 73,
      "endLine": 88,
      "isEntryPoint": false,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 75,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "isinstance",
          "resolved": false,
          "confidence": 0,
          "line": 78
        },
        {
          "target": "content",
          "resolved": false,
          "confidence": 0,
          "line": 78
        },
        {
          "target": "list",
          "resolved": false,
          "confidence": 0,
          "line": 78
        },
        {
          "target": "any",
          "resolved": false,
          "confidence": 0,
          "line": 78
        },
        {
          "target": "isinstance",
          "resolved": false,
          "confidence": 0,
          "line": 79
        },
        {
          "target": "item",
          "resolved": false,
          "confidence": 0,
          "line": 79
        },
        {
          "target": "dict",
          "resolved": false,
          "confidence": 0,
          "line": 79
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 79,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 85,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/util/prompt.py:_is_objective_message:91",
      "name": "_is_objective_message",
      "startLine": 91,
      "endLine": 97,
      "isEntryPoint": false,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 93,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "isinstance",
          "resolved": false,
          "confidence": 0,
          "line": 94
        },
        {
          "target": "content",
          "resolved": false,
          "confidence": 0,
          "line": 94
        },
        {
          "target": "str",
          "resolved": false,
          "confidence": 0,
          "line": 94
        },
        {
          "target": "startswith",
          "resolved": false,
          "confidence": 0,
          "line": 96
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/util/prompt.py:_truncate_tool_message_content:100",
      "name": "_truncate_tool_message_content",
      "startLine": 100,
      "endLine": 119,
      "isEntryPoint": false,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 105,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "isinstance",
          "resolved": false,
          "confidence": 0,
          "line": 106
        },
        {
          "target": "content",
          "resolved": false,
          "confidence": 0,
          "line": 106
        },
        {
          "target": "list",
          "resolved": false,
          "confidence": 0,
          "line": 106
        },
        {
          "target": "isinstance",
          "resolved": false,
          "confidence": 0,
          "line": 111
        },
        {
          "target": "item",
          "resolved": false,
          "confidence": 0,
          "line": 111
        },
        {
          "target": "dict",
          "resolved": false,
          "confidence": 0,
          "line": 111
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 111,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 114,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "isinstance",
          "resolved": false,
          "confidence": 0,
          "line": 116
        },
        {
          "target": "result_content",
          "resolved": false,
          "confidence": 0,
          "line": 116
        },
        {
          "target": "str",
          "resolved": false,
          "confidence": 0,
          "line": 116
        },
        {
          "target": "_tok_len",
          "resolved": true,
          "confidence": 0.95,
          "line": 117,
          "resolvedId": "backend/util/prompt.py:_tok_len:20"
        },
        {
          "target": "result_content",
          "resolved": false,
          "confidence": 0,
          "line": 117
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 117,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        },
        {
          "target": "_truncate_middle_tokens",
          "resolved": true,
          "confidence": 0.95,
          "line": 119,
          "resolvedId": "backend/util/prompt.py:_truncate_middle_tokens:122"
        },
        {
          "target": "result_content",
          "resolved": false,
          "confidence": 0,
          "line": 119
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 119,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        },
        {
          "target": "max_tokens",
          "resolved": false,
          "confidence": 0,
          "line": 119
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/util/prompt.py:_truncate_middle_tokens:122",
      "name": "_truncate_middle_tokens",
      "startLine": 122,
      "endLine": 135,
      "isEntryPoint": false,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "encode",
          "resolved": false,
          "confidence": 0,
          "line": 127
        },
        {
          "target": "str",
          "resolved": false,
          "confidence": 0,
          "line": 127
        },
        {
          "target": "text",
          "resolved": true,
          "confidence": 0.8,
          "line": 127,
          "resolvedId": "backend/util/request.py:text:297"
        },
        {
          "target": "len",
          "resolved": false,
          "confidence": 0,
          "line": 128
        },
        {
          "target": "ids",
          "resolved": false,
          "confidence": 0,
          "line": 128
        },
        {
          "target": "encode",
          "resolved": false,
          "confidence": 0,
          "line": 134
        },
        {
          "target": "decode",
          "resolved": false,
          "confidence": 0,
          "line": 135
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/util/prompt.py:compress_prompt:143",
      "name": "compress_prompt",
      "startLine": 143,
      "endLine": 275,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "encoding_for_model",
          "resolved": false,
          "confidence": 0,
          "line": 191
        },
        {
          "target": "model",
          "resolved": false,
          "confidence": 0,
          "line": 191
        },
        {
          "target": "deepcopy",
          "resolved": false,
          "confidence": 0,
          "line": 192
        },
        {
          "target": "messages",
          "resolved": false,
          "confidence": 0,
          "line": 192
        },
        {
          "target": "total_tokens",
          "resolved": true,
          "confidence": 0.95,
          "line": 198,
          "resolvedId": "backend/util/prompt.py:total_tokens:194"
        },
        {
          "target": "enumerate",
          "resolved": false,
          "confidence": 0,
          "line": 205
        },
        {
          "target": "msgs",
          "resolved": false,
          "confidence": 0,
          "line": 205
        },
        {
          "target": "isinstance",
          "resolved": false,
          "confidence": 0,
          "line": 206
        },
        {
          "target": "str",
          "resolved": false,
          "confidence": 0,
          "line": 206
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 206,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 206,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "_is_tool_message",
          "resolved": true,
          "confidence": 0.95,
          "line": 207,
          "resolvedId": "backend/util/prompt.py:_is_tool_message:73"
        },
        {
          "target": "m",
          "resolved": false,
          "confidence": 0,
          "line": 207
        },
        {
          "target": "len",
          "resolved": false,
          "confidence": 0,
          "line": 211
        },
        {
          "target": "msgs",
          "resolved": false,
          "confidence": 0,
          "line": 211
        },
        {
          "target": "dumps",
          "resolved": true,
          "confidence": 0.8,
          "line": 215,
          "resolvedId": "backend/util/json.py:dumps:20"
        },
        {
          "target": "len",
          "resolved": false,
          "confidence": 0,
          "line": 216
        },
        {
          "target": "content_str",
          "resolved": false,
          "confidence": 0,
          "line": 216
        },
        {
          "target": "_truncate_middle_tokens",
          "resolved": true,
          "confidence": 0.95,
          "line": 217,
          "resolvedId": "backend/util/prompt.py:_truncate_middle_tokens:122"
        },
        {
          "target": "content_str",
          "resolved": false,
          "confidence": 0,
          "line": 217
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 217,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        },
        {
          "target": "total_tokens",
          "resolved": true,
          "confidence": 0.95,
          "line": 222,
          "resolvedId": "backend/util/prompt.py:total_tokens:194"
        },
        {
          "target": "_is_tool_message",
          "resolved": true,
          "confidence": 0.95,
          "line": 224,
          "resolvedId": "backend/util/prompt.py:_is_tool_message:73"
        },
        {
          "target": "m",
          "resolved": false,
          "confidence": 0,
          "line": 224
        },
        {
          "target": "_truncate_tool_message_content",
          "resolved": true,
          "confidence": 0.95,
          "line": 226,
          "resolvedId": "backend/util/prompt.py:_truncate_tool_message_content:100"
        },
        {
          "target": "m",
          "resolved": false,
          "confidence": 0,
          "line": 226
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 226,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        },
        {
          "target": "cap",
          "resolved": false,
          "confidence": 0,
          "line": 226
        },
        {
          "target": "_is_objective_message",
          "resolved": true,
          "confidence": 0.95,
          "line": 229,
          "resolvedId": "backend/util/prompt.py:_is_objective_message:91"
        },
        {
          "target": "m",
          "resolved": false,
          "confidence": 0,
          "line": 229
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 233,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "_tok_len",
          "resolved": true,
          "confidence": 0.95,
          "line": 234,
          "resolvedId": "backend/util/prompt.py:_tok_len:20"
        },
        {
          "target": "content",
          "resolved": false,
          "confidence": 0,
          "line": 234
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 234,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        },
        {
          "target": "_truncate_middle_tokens",
          "resolved": true,
          "confidence": 0.95,
          "line": 235,
          "resolvedId": "backend/util/prompt.py:_truncate_middle_tokens:122"
        },
        {
          "target": "content",
          "resolved": false,
          "confidence": 0,
          "line": 235
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 235,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        },
        {
          "target": "cap",
          "resolved": false,
          "confidence": 0,
          "line": 235
        },
        {
          "target": "total_tokens",
          "resolved": true,
          "confidence": 0.95,
          "line": 239,
          "resolvedId": "backend/util/prompt.py:total_tokens:194"
        },
        {
          "target": "len",
          "resolved": false,
          "confidence": 0,
          "line": 239
        },
        {
          "target": "msgs",
          "resolved": false,
          "confidence": 0,
          "line": 239
        },
        {
          "target": "range",
          "resolved": false,
          "confidence": 0,
          "line": 242
        },
        {
          "target": "len",
          "resolved": false,
          "confidence": 0,
          "line": 242
        },
        {
          "target": "msgs",
          "resolved": false,
          "confidence": 0,
          "line": 242
        },
        {
          "target": "_is_tool_message",
          "resolved": true,
          "confidence": 0.95,
          "line": 243,
          "resolvedId": "backend/util/prompt.py:_is_tool_message:73"
        },
        {
          "target": "_is_objective_message",
          "resolved": true,
          "confidence": 0.95,
          "line": 243,
          "resolvedId": "backend/util/prompt.py:_is_objective_message:91"
        },
        {
          "target": "append",
          "resolved": false,
          "confidence": 0,
          "line": 244
        },
        {
          "target": "i",
          "resolved": false,
          "confidence": 0,
          "line": 244
        },
        {
          "target": "len",
          "resolved": false,
          "confidence": 0,
          "line": 250
        },
        {
          "target": "msgs",
          "resolved": false,
          "confidence": 0,
          "line": 250
        },
        {
          "target": "min",
          "resolved": false,
          "confidence": 0,
          "line": 251
        },
        {
          "target": "deletable_indices",
          "resolved": false,
          "confidence": 0,
          "line": 251
        },
        {
          "target": "abs",
          "resolved": false,
          "confidence": 0,
          "line": 251
        },
        {
          "target": "total_tokens",
          "resolved": true,
          "confidence": 0.95,
          "line": 256,
          "resolvedId": "backend/util/prompt.py:total_tokens:194"
        },
        {
          "target": "_is_tool_message",
          "resolved": true,
          "confidence": 0.95,
          "line": 258,
          "resolvedId": "backend/util/prompt.py:_is_tool_message:73"
        },
        {
          "target": "_truncate_tool_message_content",
          "resolved": true,
          "confidence": 0.95,
          "line": 260,
          "resolvedId": "backend/util/prompt.py:_truncate_tool_message_content:100"
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 260,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        },
        {
          "target": "cap",
          "resolved": false,
          "confidence": 0,
          "line": 260
        },
        {
          "target": "get",
          "resolved": true,
          "confidence": 0.4,
          "line": 263,
          "resolvedId": "backend/integrations/oauth/__init__.py:get:83"
        },
        {
          "target": "_tok_len",
          "resolved": true,
          "confidence": 0.95,
          "line": 264,
          "resolvedId": "backend/util/prompt.py:_tok_len:20"
        },
        {
          "target": "text",
          "resolved": true,
          "confidence": 0.8,
          "line": 264,
          "resolvedId": "backend/util/request.py:text:297"
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 264,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        },
        {
          "target": "_truncate_middle_tokens",
          "resolved": true,
          "confidence": 0.95,
          "line": 265,
          "resolvedId": "backend/util/prompt.py:_truncate_middle_tokens:122"
        },
        {
          "target": "text",
          "resolved": true,
          "confidence": 0.8,
          "line": 265,
          "resolvedId": "backend/util/request.py:text:297"
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 265,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        },
        {
          "target": "cap",
          "resolved": false,
          "confidence": 0,
          "line": 265
        },
        {
          "target": "total_tokens",
          "resolved": true,
          "confidence": 0.95,
          "line": 269,
          "resolvedId": "backend/util/prompt.py:total_tokens:194"
        },
        {
          "target": "ValueError",
          "resolved": false,
          "confidence": 0,
          "line": 270
        },
        {
          "target": "total_tokens",
          "resolved": true,
          "confidence": 0.95,
          "line": 272,
          "resolvedId": "backend/util/prompt.py:total_tokens:194"
        },
        {
          "target": "sum",
          "resolved": false,
          "confidence": 0,
          "line": 196
        },
        {
          "target": "_msg_tokens",
          "resolved": true,
          "confidence": 0.95,
          "line": 196,
          "resolvedId": "backend/util/prompt.py:_msg_tokens:25"
        },
        {
          "target": "m",
          "resolved": false,
          "confidence": 0,
          "line": 196
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 196,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/util/prompt.py:total_tokens:194",
      "name": "total_tokens",
      "startLine": 194,
      "endLine": 196,
      "isEntryPoint": false,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "sum",
          "resolved": false,
          "confidence": 0,
          "line": 196
        },
        {
          "target": "_msg_tokens",
          "resolved": true,
          "confidence": 0.95,
          "line": 196,
          "resolvedId": "backend/util/prompt.py:_msg_tokens:25"
        },
        {
          "target": "m",
          "resolved": false,
          "confidence": 0,
          "line": 196
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 196,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/util/prompt.py:estimate_token_count:278",
      "name": "estimate_token_count",
      "startLine": 278,
      "endLine": 297,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "encoding_for_model",
          "resolved": false,
          "confidence": 0,
          "line": 296
        },
        {
          "target": "model",
          "resolved": false,
          "confidence": 0,
          "line": 296
        },
        {
          "target": "sum",
          "resolved": false,
          "confidence": 0,
          "line": 297
        },
        {
          "target": "_msg_tokens",
          "resolved": true,
          "confidence": 0.95,
          "line": 297,
          "resolvedId": "backend/util/prompt.py:_msg_tokens:25"
        },
        {
          "target": "m",
          "resolved": false,
          "confidence": 0,
          "line": 297
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 297,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "backend/util/prompt.py:estimate_token_count_str:300",
      "name": "estimate_token_count_str",
      "startLine": 300,
      "endLine": 320,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "encoding_for_model",
          "resolved": false,
          "confidence": 0,
          "line": 318
        },
        {
          "target": "model",
          "resolved": false,
          "confidence": 0,
          "line": 318
        },
        {
          "target": "dumps",
          "resolved": true,
          "confidence": 0.8,
          "line": 319,
          "resolvedId": "backend/util/json.py:dumps:20"
        },
        {
          "target": "text",
          "resolved": true,
          "confidence": 0.8,
          "line": 319,
          "resolvedId": "backend/util/request.py:text:297"
        },
        {
          "target": "isinstance",
          "resolved": false,
          "confidence": 0,
          "line": 319
        },
        {
          "target": "text",
          "resolved": true,
          "confidence": 0.8,
          "line": 319,
          "resolvedId": "backend/util/request.py:text:297"
        },
        {
          "target": "str",
          "resolved": false,
          "confidence": 0,
          "line": 319
        },
        {
          "target": "_tok_len",
          "resolved": true,
          "confidence": 0.95,
          "line": 320,
          "resolvedId": "backend/util/prompt.py:_tok_len:20"
        },
        {
          "target": "text",
          "resolved": true,
          "confidence": 0.8,
          "line": 320,
          "resolvedId": "backend/util/request.py:text:297"
        },
        {
          "target": "enc",
          "resolved": true,
          "confidence": 0.8,
          "line": 320,
          "resolvedId": "backend/util/prompt_test.py:enc:14"
        }
      ],
      "calledBy": [],
      "dataAccess": []
    }
  ]
}
{
  "version": "1.0.0",
  "generatedAt": "2026-01-29T07:19:20.195Z",
  "checksum": "e1f5ee5907518ed5",
  "file": "src/components/contextual/Chat/components/ChatMessage/ChatMessage.tsx",
  "functions": [
    {
      "id": "src/components/contextual/Chat/components/ChatMessage/ChatMessage.tsx:stripInternalReasoning:27",
      "name": "stripInternalReasoning",
      "startLine": 27,
      "endLine": 33,
      "isEntryPoint": false,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "replace",
          "resolved": false,
          "confidence": 0,
          "line": 28
        },
        {
          "target": "trim",
          "resolved": false,
          "confidence": 0,
          "line": 32
        },
        {
          "target": "replace",
          "resolved": false,
          "confidence": 0,
          "line": 32
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "src/components/contextual/Chat/components/ChatMessage/ChatMessage.tsx:getDisplayContent:35",
      "name": "getDisplayContent",
      "startLine": 35,
      "endLine": 39,
      "isEntryPoint": false,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "stripInternalReasoning",
          "resolved": true,
          "confidence": 0.95,
          "line": 38,
          "resolvedId": "src/components/contextual/Chat/components/ChatMessage/ChatMessage.tsx:stripInternalReasoning:27"
        },
        {
          "target": "content",
          "resolved": false,
          "confidence": 0,
          "line": 38
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "src/components/contextual/Chat/components/ChatMessage/ChatMessage.tsx:ChatMessage:54",
      "name": "ChatMessage",
      "startLine": 54,
      "endLine": 435,
      "isEntryPoint": true,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "useSupabase",
          "resolved": true,
          "confidence": 0.8,
          "line": 65,
          "resolvedId": "src/lib/supabase/hooks/useSupabase.ts:useSupabase:10"
        },
        {
          "target": "useRouter",
          "resolved": false,
          "confidence": 0,
          "line": 66
        },
        {
          "target": "useState",
          "resolved": false,
          "confidence": 0,
          "line": 67
        },
        {
          "target": "useChatMessage",
          "resolved": true,
          "confidence": 0.8,
          "line": 78,
          "resolvedId": "src/components/contextual/Chat/components/ChatMessage/useChatMessage.ts:useChatMessage:133"
        },
        {
          "target": "message",
          "resolved": false,
          "confidence": 0,
          "line": 78
        },
        {
          "target": "getDisplayContent",
          "resolved": true,
          "confidence": 0.95,
          "line": 79,
          "resolvedId": "src/components/contextual/Chat/components/ChatMessage/ChatMessage.tsx:getDisplayContent:35"
        },
        {
          "target": "message",
          "resolved": false,
          "confidence": 0,
          "line": 79
        },
        {
          "target": "isUser",
          "resolved": false,
          "confidence": 0,
          "line": 79
        },
        {
          "target": "useCallback",
          "resolved": false,
          "confidence": 0,
          "line": 81
        },
        {
          "target": "onSendMessage",
          "resolved": false,
          "confidence": 0,
          "line": 86
        },
        {
          "target": "onDismissCredentials",
          "resolved": false,
          "confidence": 0,
          "line": 92
        },
        {
          "target": "onDismissCredentials",
          "resolved": false,
          "confidence": 0,
          "line": 101
        },
        {
          "target": "join",
          "resolved": false,
          "confidence": 0,
          "line": 107
        },
        {
          "target": "map",
          "resolved": false,
          "confidence": 0,
          "line": 107
        },
        {
          "target": "entries",
          "resolved": false,
          "confidence": 0,
          "line": 107
        },
        {
          "target": "answers",
          "resolved": false,
          "confidence": 0,
          "line": 107
        },
        {
          "target": "onSendMessage",
          "resolved": false,
          "confidence": 0,
          "line": 111
        },
        {
          "target": "useCallback",
          "resolved": false,
          "confidence": 0,
          "line": 117
        },
        {
          "target": "writeText",
          "resolved": false,
          "confidence": 0,
          "line": 123
        },
        {
          "target": "displayContent",
          "resolved": false,
          "confidence": 0,
          "line": 123
        },
        {
          "target": "setCopied",
          "resolved": false,
          "confidence": 0,
          "line": 124
        },
        {
          "target": "setTimeout",
          "resolved": false,
          "confidence": 0,
          "line": 125
        },
        {
          "target": "setCopied",
          "resolved": false,
          "confidence": 0,
          "line": 125
        },
        {
          "target": "error",
          "resolved": false,
          "confidence": 0,
          "line": 127
        },
        {
          "target": "error",
          "resolved": false,
          "confidence": 0,
          "line": 127
        },
        {
          "target": "useCallback",
          "resolved": false,
          "confidence": 0,
          "line": 133
        },
        {
          "target": "onSendMessage",
          "resolved": false,
          "confidence": 0,
          "line": 135
        },
        {
          "target": "content",
          "resolved": false,
          "confidence": 0,
          "line": 135
        },
        {
          "target": "useCallback",
          "resolved": false,
          "confidence": 0,
          "line": 138
        },
        {
          "target": "push",
          "resolved": false,
          "confidence": 0,
          "line": 140
        },
        {
          "target": "libraryAgentLink",
          "resolved": false,
          "confidence": 0,
          "line": 140
        },
        {
          "target": "ChatCredentialsSetup",
          "resolved": true,
          "confidence": 0.8,
          "line": 147,
          "resolvedId": "src/components/contextual/Chat/components/ChatCredentialsSetup/ChatCredentialsSetup.tsx:ChatCredentialsSetup:43"
        },
        {
          "target": "credentials",
          "resolved": false,
          "confidence": 0,
          "line": 148
        },
        {
          "target": "agentName",
          "resolved": false,
          "confidence": 0,
          "line": 149
        },
        {
          "target": "message",
          "resolved": false,
          "confidence": 0,
          "line": 150
        },
        {
          "target": "handleAllCredentialsComplete",
          "resolved": false,
          "confidence": 0,
          "line": 151
        },
        {
          "target": "handleCancelCredentials",
          "resolved": true,
          "confidence": 0.95,
          "line": 152,
          "resolvedId": "src/components/contextual/Chat/components/ChatMessage/ChatMessage.tsx:handleCancelCredentials:98"
        },
        {
          "target": "className",
          "resolved": false,
          "confidence": 0,
          "line": 153
        },
        {
          "target": "ClarificationQuestionsWidget",
          "resolved": true,
          "confidence": 0.8,
          "line": 160,
          "resolvedId": "src/components/contextual/Chat/components/ClarificationQuestionsWidget/ClarificationQuestionsWidget.tsx:ClarificationQuestionsWidget:25"
        },
        {
          "target": "questions",
          "resolved": false,
          "confidence": 0,
          "line": 161
        },
        {
          "target": "message",
          "resolved": false,
          "confidence": 0,
          "line": 162
        },
        {
          "target": "handleClarificationAnswers",
          "resolved": true,
          "confidence": 0.95,
          "line": 163,
          "resolvedId": "src/components/contextual/Chat/components/ChatMessage/ChatMessage.tsx:handleClarificationAnswers:105"
        },
        {
          "target": "className",
          "resolved": false,
          "confidence": 0,
          "line": 164
        },
        {
          "target": "cn",
          "resolved": true,
          "confidence": 0.4,
          "line": 174,
          "resolvedId": "src/components/renderers/InputRenderer/utils/rjsf-utils.ts:cn:4"
        },
        {
          "target": "className",
          "resolved": false,
          "confidence": 0,
          "line": 174
        },
        {
          "target": "CheckCircleIcon",
          "resolved": false,
          "confidence": 0,
          "line": 179
        },
        {
          "target": "cn",
          "resolved": true,
          "confidence": 0.4,
          "line": 202,
          "resolvedId": "src/components/renderers/InputRenderer/utils/rjsf-utils.ts:cn:4"
        },
        {
          "target": "className",
          "resolved": false,
          "confidence": 0,
          "line": 202
        },
        {
          "target": "AuthPromptWidget",
          "resolved": true,
          "confidence": 0.8,
          "line": 203,
          "resolvedId": "src/components/contextual/Chat/components/AuthPromptWidget/AuthPromptWidget.tsx:AuthPromptWidget:20"
        },
        {
          "target": "message",
          "resolved": false,
          "confidence": 0,
          "line": 204
        },
        {
          "target": "sessionId",
          "resolved": false,
          "confidence": 0,
          "line": 205
        },
        {
          "target": "agentInfo",
          "resolved": false,
          "confidence": 0,
          "line": 206
        },
        {
          "target": "(() => {\n        // Find the last tool_call index\n        let lastToolCallIndex = -1;\n        for (let i = messages.length - 1; i >= 0; i--) {\n          if (messages[i].type === \"tool_call\") {\n            lastToolCallIndex = i;\n            break;\n          }\n        }\n        // Check if this is the last tool_call and there's no response yet\n        if (index === lastToolCallIndex) {\n          // Check if there's a tool_response for this tool call\n          const hasResponse = messages\n            .slice(index + 1)\n            .some(\n              (msg) =>\n                msg.type === \"tool_response\" && msg.toolId === message.toolId,\n            );\n          return !hasResponse;\n        }\n        return false;\n      })",
          "resolved": false,
          "confidence": 0,
          "line": 222
        },
        {
          "target": "some",
          "resolved": false,
          "confidence": 0,
          "line": 234
        },
        {
          "target": "slice",
          "resolved": false,
          "confidence": 0,
          "line": 234
        },
        {
          "target": "cn",
          "resolved": true,
          "confidence": 0.4,
          "line": 246,
          "resolvedId": "src/components/renderers/InputRenderer/utils/rjsf-utils.ts:cn:4"
        },
        {
          "target": "className",
          "resolved": false,
          "confidence": 0,
          "line": 246
        },
        {
          "target": "ToolCallMessage",
          "resolved": true,
          "confidence": 0.8,
          "line": 247,
          "resolvedId": "src/components/contextual/Chat/components/ToolCallMessage/ToolCallMessage.tsx:ToolCallMessage:19"
        },
        {
          "target": "toolId",
          "resolved": false,
          "confidence": 0,
          "line": 248
        },
        {
          "target": "toolName",
          "resolved": false,
          "confidence": 0,
          "line": 249
        },
        {
          "target": "arguments",
          "resolved": false,
          "confidence": 0,
          "line": 250
        },
        {
          "target": "isToolCallStreaming",
          "resolved": false,
          "confidence": 0,
          "line": 251
        },
        {
          "target": "cn",
          "resolved": true,
          "confidence": 0.4,
          "line": 260,
          "resolvedId": "src/components/renderers/InputRenderer/utils/rjsf-utils.ts:cn:4"
        },
        {
          "target": "className",
          "resolved": false,
          "confidence": 0,
          "line": 260
        },
        {
          "target": "NoResultsMessage",
          "resolved": true,
          "confidence": 0.8,
          "line": 261,
          "resolvedId": "src/components/contextual/Chat/components/NoResultsMessage/NoResultsMessage.tsx:NoResultsMessage:11"
        },
        {
          "target": "message",
          "resolved": false,
          "confidence": 0,
          "line": 262
        },
        {
          "target": "suggestions",
          "resolved": false,
          "confidence": 0,
          "line": 263
        },
        {
          "target": "cn",
          "resolved": true,
          "confidence": 0.4,
          "line": 272,
          "resolvedId": "src/components/renderers/InputRenderer/utils/rjsf-utils.ts:cn:4"
        },
        {
          "target": "className",
          "resolved": false,
          "confidence": 0,
          "line": 272
        },
        {
          "target": "AgentCarouselMessage",
          "resolved": true,
          "confidence": 0.8,
          "line": 273,
          "resolvedId": "src/components/contextual/Chat/components/AgentCarouselMessage/AgentCarouselMessage.tsx:AgentCarouselMessage:23"
        },
        {
          "target": "agents",
          "resolved": false,
          "confidence": 0,
          "line": 274
        },
        {
          "target": "totalCount",
          "resolved": false,
          "confidence": 0,
          "line": 275
        },
        {
          "target": "cn",
          "resolved": true,
          "confidence": 0.4,
          "line": 284,
          "resolvedId": "src/components/renderers/InputRenderer/utils/rjsf-utils.ts:cn:4"
        },
        {
          "target": "className",
          "resolved": false,
          "confidence": 0,
          "line": 284
        },
        {
          "target": "ExecutionStartedMessage",
          "resolved": true,
          "confidence": 0.8,
          "line": 285,
          "resolvedId": "src/components/contextual/Chat/components/ExecutionStartedMessage/ExecutionStartedMessage.tsx:ExecutionStartedMessage:14"
        },
        {
          "target": "executionId",
          "resolved": false,
          "confidence": 0,
          "line": 286
        },
        {
          "target": "agentName",
          "resolved": false,
          "confidence": 0,
          "line": 287
        },
        {
          "target": "message",
          "resolved": false,
          "confidence": 0,
          "line": 288
        },
        {
          "target": "PendingOperationWidget",
          "resolved": true,
          "confidence": 0.8,
          "line": 300,
          "resolvedId": "src/components/contextual/Chat/components/PendingOperationWidget/PendingOperationWidget.tsx:PendingOperationWidget:35"
        },
        {
          "target": "message",
          "resolved": false,
          "confidence": 0,
          "line": 302
        },
        {
          "target": "toolName",
          "resolved": false,
          "confidence": 0,
          "line": 303
        },
        {
          "target": "className",
          "resolved": false,
          "confidence": 0,
          "line": 304
        },
        {
          "target": "PendingOperationWidget",
          "resolved": true,
          "confidence": 0.8,
          "line": 312,
          "resolvedId": "src/components/contextual/Chat/components/PendingOperationWidget/PendingOperationWidget.tsx:PendingOperationWidget:35"
        },
        {
          "target": "message",
          "resolved": false,
          "confidence": 0,
          "line": 314
        },
        {
          "target": "toolName",
          "resolved": false,
          "confidence": 0,
          "line": 315
        },
        {
          "target": "className",
          "resolved": false,
          "confidence": 0,
          "line": 316
        },
        {
          "target": "PendingOperationWidget",
          "resolved": true,
          "confidence": 0.8,
          "line": 324,
          "resolvedId": "src/components/contextual/Chat/components/PendingOperationWidget/PendingOperationWidget.tsx:PendingOperationWidget:35"
        },
        {
          "target": "message",
          "resolved": false,
          "confidence": 0,
          "line": 326
        },
        {
          "target": "toolName",
          "resolved": false,
          "confidence": 0,
          "line": 327
        },
        {
          "target": "className",
          "resolved": false,
          "confidence": 0,
          "line": 328
        },
        {
          "target": "cn",
          "resolved": true,
          "confidence": 0.4,
          "line": 336,
          "resolvedId": "src/components/renderers/InputRenderer/utils/rjsf-utils.ts:cn:4"
        },
        {
          "target": "className",
          "resolved": false,
          "confidence": 0,
          "line": 336
        },
        {
          "target": "ToolResponseMessage",
          "resolved": true,
          "confidence": 0.8,
          "line": 337,
          "resolvedId": "src/components/contextual/Chat/components/ToolResponseMessage/ToolResponseMessage.tsx:ToolResponseMessage:21"
        },
        {
          "target": "toolId",
          "resolved": false,
          "confidence": 0,
          "line": 338
        },
        {
          "target": "toolName",
          "resolved": false,
          "confidence": 0,
          "line": 339
        },
        {
          "target": "result",
          "resolved": false,
          "confidence": 0,
          "line": 340
        },
        {
          "target": "cn",
          "resolved": true,
          "confidence": 0.4,
          "line": 350,
          "resolvedId": "src/components/renderers/InputRenderer/utils/rjsf-utils.ts:cn:4"
        },
        {
          "target": "className",
          "resolved": false,
          "confidence": 0,
          "line": 353
        },
        {
          "target": "cn",
          "resolved": true,
          "confidence": 0.4,
          "line": 358,
          "resolvedId": "src/components/renderers/InputRenderer/utils/rjsf-utils.ts:cn:4"
        },
        {
          "target": "UserChatBubble",
          "resolved": true,
          "confidence": 0.8,
          "line": 364,
          "resolvedId": "src/components/contextual/Chat/components/UserChatBubble/UserChatBubble.tsx:UserChatBubble:9"
        },
        {
          "target": "MarkdownContent",
          "resolved": true,
          "confidence": 0.8,
          "line": 365,
          "resolvedId": "src/components/contextual/Chat/components/MarkdownContent/MarkdownContent.tsx:MarkdownContent:32"
        },
        {
          "target": "displayContent",
          "resolved": false,
          "confidence": 0,
          "line": 365
        },
        {
          "target": "AIChatBubble",
          "resolved": true,
          "confidence": 0.8,
          "line": 368,
          "resolvedId": "src/components/contextual/Chat/components/AIChatBubble/AIChatBubble.tsx:AIChatBubble:9"
        },
        {
          "target": "MarkdownContent",
          "resolved": true,
          "confidence": 0.8,
          "line": 369,
          "resolvedId": "src/components/contextual/Chat/components/MarkdownContent/MarkdownContent.tsx:MarkdownContent:32"
        },
        {
          "target": "displayContent",
          "resolved": false,
          "confidence": 0,
          "line": 369
        },
        {
          "target": "ToolResponseMessage",
          "resolved": true,
          "confidence": 0.8,
          "line": 372,
          "resolvedId": "src/components/contextual/Chat/components/ToolResponseMessage/ToolResponseMessage.tsx:ToolResponseMessage:21"
        },
        {
          "target": "toolId",
          "resolved": false,
          "confidence": 0,
          "line": 373
        },
        {
          "target": "result",
          "resolved": false,
          "confidence": 0,
          "line": 375
        },
        {
          "target": "cn",
          "resolved": true,
          "confidence": 0.4,
          "line": 382,
          "resolvedId": "src/components/renderers/InputRenderer/utils/rjsf-utils.ts:cn:4"
        },
        {
          "target": "Button",
          "resolved": true,
          "confidence": 0.8,
          "line": 388,
          "resolvedId": "src/components/atoms/Button/Button.tsx:Button:12"
        },
        {
          "target": "handleTryAgain",
          "resolved": false,
          "confidence": 0,
          "line": 391
        },
        {
          "target": "ArrowsClockwiseIcon",
          "resolved": false,
          "confidence": 0,
          "line": 394
        },
        {
          "target": "Button",
          "resolved": true,
          "confidence": 0.8,
          "line": 398,
          "resolvedId": "src/components/atoms/Button/Button.tsx:Button:12"
        },
        {
          "target": "handleCopy",
          "resolved": true,
          "confidence": 0.8,
          "line": 401,
          "resolvedId": "src/app/(platform)/library/agents/[id]/components/NewAgentLibraryView/components/selected-views/ShareRunButton/useShareRunButton.ts:handleCopy:99"
        },
        {
          "target": "CheckIcon",
          "resolved": false,
          "confidence": 0,
          "line": 406
        },
        {
          "target": "onDismissCredentials",
          "resolved": false,
          "confidence": 0,
          "line": 101
        },
        {
          "target": "join",
          "resolved": false,
          "confidence": 0,
          "line": 107
        },
        {
          "target": "map",
          "resolved": false,
          "confidence": 0,
          "line": 107
        },
        {
          "target": "entries",
          "resolved": false,
          "confidence": 0,
          "line": 107
        },
        {
          "target": "answers",
          "resolved": false,
          "confidence": 0,
          "line": 107
        },
        {
          "target": "onSendMessage",
          "resolved": false,
          "confidence": 0,
          "line": 111
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "src/components/contextual/Chat/components/ChatMessage/ChatMessage.tsx:handleCancelCredentials:98",
      "name": "handleCancelCredentials",
      "startLine": 98,
      "endLine": 103,
      "isEntryPoint": false,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "onDismissCredentials",
          "resolved": false,
          "confidence": 0,
          "line": 101
        },
        {
          "target": "onDismissCredentials",
          "resolved": false,
          "confidence": 0,
          "line": 101
        }
      ],
      "calledBy": [],
      "dataAccess": []
    },
    {
      "id": "src/components/contextual/Chat/components/ChatMessage/ChatMessage.tsx:handleClarificationAnswers:105",
      "name": "handleClarificationAnswers",
      "startLine": 105,
      "endLine": 115,
      "isEntryPoint": false,
      "isDataAccessor": false,
      "calls": [
        {
          "target": "join",
          "resolved": false,
          "confidence": 0,
          "line": 107
        },
        {
          "target": "map",
          "resolved": false,
          "confidence": 0,
          "line": 107
        },
        {
          "target": "entries",
          "resolved": false,
          "confidence": 0,
          "line": 107
        },
        {
          "target": "answers",
          "resolved": false,
          "confidence": 0,
          "line": 107
        },
        {
          "target": "onSendMessage",
          "resolved": false,
          "confidence": 0,
          "line": 111
        },
        {
          "target": "join",
          "resolved": false,
          "confidence": 0,
          "line": 107
        },
        {
          "target": "map",
          "resolved": false,
          "confidence": 0,
          "line": 107
        },
        {
          "target": "entries",
          "resolved": false,
          "confidence": 0,
          "line": 107
        },
        {
          "target": "answers",
          "resolved": false,
          "confidence": 0,
          "line": 107
        },
        {
          "target": "onSendMessage",
          "resolved": false,
          "confidence": 0,
          "line": 111
        }
      ],
      "calledBy": [],
      "dataAccess": []
    }
  ]
}